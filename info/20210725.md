<h1> 트위치 팔로우 목록 관리용 앱 어플리케이션 2021.07.25</h1>

<h2>부트스트랩을 이용한 전체적인 메인화면 디자인</h2>
<h3>전체 디자인 모습</h3>
<img src="https://user-images.githubusercontent.com/61536109/126875248-8825f680-5051-47b3-b85c-61ba7b9f2da8.png" width="800px"><br><br>

<h3> TopBar </h3>
<img src="https://user-images.githubusercontent.com/61536109/126875286-3b3b9e3c-0140-46a2-bb32-9ced50c52c1a.png" width="800px"><br>
<p> 상단의 TobBar는 타이틀과 트위치로 이동할 수 있는 버튼, 클릭하면 펼칠 수 있는 메뉴가 존재합니다. 메뉴로는 로그인, 로그아웃과 나의 팔로우 목록을 관리할 수 있는 페이지로 이동할 수 있도록 설계하였습니다.</p><br>

<h3> HeaderSlider </h3>
<img src="https://user-images.githubusercontent.com/61536109/126875290-5e58ae98-6179-48b4-b96b-a1621e474ac2.png" width="800px"><br>
<p>swiper.js를 사용하여 구현하였고, 트위치 API와 연계하여 현재 라이브 방송 중인 스트리머를 시청자 순으로 정렬하여 가져온 방송의 썸네일 및 정보를 표시합니다. 만약 라이브중인 방송이 없거나, 인터넷 문제 등으로 화면을 불러올 수 없는 경우에는 기본 이미지를 띄우도록 하였습니다.</p> <br>

<h3> SearchBar </h3>
<img src="https://user-images.githubusercontent.com/61536109/126875294-d22856f0-24a4-4515-bea6-14901ad54f3a.png" width="800px"><br>
<p> 스트리머를 검색할 수 있는 검색창입니다. 비로그인시에도 사용할 수 있으며, 검색을 통해서 스트리머를 검색하면 해당 스트리머의 상세정보 페이지로 이동하여 스트리머의 정보를 확인할 수 있습니다. </p><br>

<h3> MyReplayVideo </h3>
<img src="https://user-images.githubusercontent.com/61536109/126875295-4178a919-d14f-4429-8981-7ad210bafe3f.png" width="800px"><br>
<p> 로그인한 유저에게만 표시됩니다. 자신이 담은 다시보기 비디오의 썸네일과 링크로 이어지도록 합니다. </p> <br>

<h3> My Follow </h3>
<img src="https://user-images.githubusercontent.com/61536109/126875296-42dc83ed-66c8-4270-94f9-cb143b205614.png" width="800px"><br>
<p> 현재 라이브중인 팔로우 스트리머의 방송, 가장 최신의 팔로우 스트리머의 다시보기 영상, 팔로우 스트리머의 최근 클립 중 가장 인기있는 클립 등을 바로 조회할 수 있도록 구현할 창입니다. </p> <br><br><br>

<h2> 기본적인 트위치 API와 연계기능 구현 </h2>
<p> 트위치 API에 등록하여, 토큰을 받아서 정보를 가져올 수 있도록 기본적인 세팅을 완료하였습니다. 다음은 트위치 API를 통해서, 한국 라이브 방송중인 스트리머 중 시청자가 가장 높은 스트리머 5명의 방송정보를 가져오도록 하는 쿼리를 구현한 메소드입니다. </p>
<pre>
public ArrayList<Stream> getLiveStreams(String client_id, String app_access_token, int first) throws Exception {
    HttpHeaders headers = new HttpHeaders();
    headers.add("Authorization", app_access_token);
    headers.add("Client-id", client_id);
    
    HttpEntity entity = new HttpEntity(headers);
    RestTemplate rt = new RestTemplate();
    
    ArrayList<Stream> list = new ArrayList<>();
    try {
        ResponseEntity<String> response = rt.exchange(
                "https://api.twitch.tv/helix/streams?language={language}&first={first}", HttpMethod.GET,
                entity, String.class, "ko", first);
        JSONObject jsonfile = (JSONObject) parser.parse(response.getBody());
        JSONArray jsonArray = (JSONArray) parser.parse(jsonfile.get("data").toString());
        
        for(int i=0;i<jsonArray.size();i++) {
            JSONObject cJson = (JSONObject) parser.parse(jsonArray.get(i).toString());
            
            Stream stream = new Gson().fromJson(cJson.toString(), Stream.class);
            TwitchUser cUser = getUser(client_id, app_access_token, stream.getUser_id());
            
            stream.setProfile_image_url(cUser.getProfile_image_url());
            list.add(stream);
        }
        
    } catch (HttpStatusCodeException  e) {
        JSONObject exceptionMessage = (JSONObject) parser.parse(e.getResponseBodyAsString());
        
        if(exceptionMessage.get("status").toString().equals("401")) return null;
    }
    
    return list;
}
</pre>